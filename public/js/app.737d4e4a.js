(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["app"],{0:function(e,t,n){e.exports=n("56d7")},"19b7":function(e,t,n){},"1a5d":function(e,t,n){var a={"./admin/Setting.vue":["2e96","chunk-view-admin-Setting-vue"],"./home/Index.vue":["9553","chunk-view-home-Index-vue"],"./home/Login.vue":["52c3","chunk-view-home-Login-vue"],"./home/Message.vue":["a1ae","chunk-view-home-Message-vue"]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id="1a5d",e.exports=r},"56d7":function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"capitalize",(function(){return ae})),n.d(a,"readablizeBytes",(function(){return re}));n("456d"),n("ac6a"),n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},o=[],i=(n("7f7f"),[{name:"APP_LOGIN_SUCCESS",callback:function(){this.$router.push({name:"dashboard"})}},{name:"APP_LOGOUT_SUCCESS",callback:function(){this.$store.commit("clearAll"),this.$router.push({name:"Login"})}}]),u={name:"App",data:function(){return{}},created:function(){var e=this;i.forEach((function(t){e.$on(t.name,t.callback)})),window.getApp=this}},c=u,m=(n("5d3a"),n("2877")),f=Object(m["a"])(c,s,o,!1,null,null,null),p=f.exports,d=n("8c4f"),l=n("2f62"),h=n("8ded"),v=n.n(h),g=n("843a"),b=n.n(g);v.a.addPlugin(b.a);var k=v.a,w=n("bc3a"),_=n.n(w),A=n("f121"),x=n.n(A),O=n("a78e"),y=n.n(O),C="v_access_token";function U(e){y.a.set(C,e)}function I(){var e=y.a.get(C);return e||!1}function L(){return y.a.remove(C)}var E={baseURL:x.a.build.baseUrl,timeout:5e3},P=_.a.create(E);P.interceptors.request.use((function(e){return X.getters.token&&(e.headers.common["Authorization"]=I()),e}),(function(e){return Promise.reject(e)})),P.interceptors.response.use((function(e){var t=e.headers.authorization;return t&&X.commit("setToken",t),e.data}),(function(e){if(e&&e.response){var t=e.response.headers.authorization;switch(t&&X.commit("setToken",t),e.response.status){case 400:e.response.data.message?e.message=e.response.data.message:e.message="请求错误";break;case 401:e.message="登录失效",X.commit("clearAll"),ne.push({name:"Login"});break;case 403:e.message="拒绝访问",ne.push({name:"403"});break;case 404:e.response.data.message?e.message=e.response.data.message:e.message="未找到内容";break;case 408:e.message="请求超时";break;case 422:e.message=e.response.data.errors[0]["code"];break;case 429:e.message=e.response.data.message;break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:}}return r["default"].$toasted.error(e.message),Promise.reject(e)}));var S=P;function T(e){return S.get("/api/app/config",e)}var N={state:{app_name:"OLAINDEX"},mutations:{setAppConfig:function(e,t){for(var n in t)e[n]=t[n];k.set("app",t)},clearAppConfig:function(){k.set("app",{})}},actions:{loadAppConfig:function(e){var t=e.commit;return new Promise((function(e,n){T().then((function(n){var a=n.data;t("setAppConfig",a),e(n)})).catch((function(e){n(e)}))}))}}},M=(n("96cf"),n("3b8d"));function $(e){return S.post("/api/login",e)}function j(e){return S.post("/api/logout",e)}function R(e){return S.post("/api/refresh",e)}function B(){return S.get("/api/user")}var D={state:{user_id:"",name:"",token:I(),status:"",is_admin:!1},mutations:{setUserId:function(e,t){e.user_id=t},setUserName:function(e,t){e.name=t},setStatus:function(e,t){e.status=t},setIsAdmin:function(e,t){e.is_admin=t},setToken:function(e,t){e.token=t,U(t)},clearAll:function(e){e.token="",e.user_id="",e.name="",e.status="",e.is_admin=!1,L(),k.set("user",{})}},actions:{handleLogin:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t,n){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.commit,e.next=3,new Promise((function(e,t){$(n).then((function(t){var n=t.data;a("setToken",n.token),e(t)})).catch((function(e){t(e)}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleLogOut:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,new Promise((function(e,t){j().then((function(t){n("clearAll"),e(t)})).catch((function(e){t(e)}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),getUserInfo:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,new Promise((function(e,t){try{B().then((function(t){var a=t.data;n("setUserId",a.id),n("setUserName",a.name),n("setStatus",a.status),n("setIsAdmin",a.is_admin),k.set("user",a),e(t)})).catch((function(e){t(e)}))}catch(a){t(a)}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),refreshToken:function(){var e=Object(M["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,new Promise((function(e,t){try{R().then((function(t){var a=t.data;n("setToken",a.token),e(t)}))}catch(a){t(a)}}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}()}},q={app_name:function(e){return e.app.app_name},user_id:function(e){return e.user.name},name:function(e){return e.user.name},token:function(e){return e.user.token}},z=q;r["default"].use(l["a"]);var X=new l["a"].Store({state:{},mutations:{},actions:{},getters:z,modules:{app:N,user:D}}),G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"page-common"}},[n("b-navbar",{attrs:{toggleable:"md",type:"dark",variant:"primary",sticky:!0}},[n("b-container",[n("b-navbar-brand",{attrs:{to:{name:"home"}}},[e._v("OLAINDEX")]),n("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),n("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[n("b-navbar-nav",[n("b-nav-item",{attrs:{to:{name:"home"}}},[n("i",{staticClass:"ri-home-fill"}),e._v(" 首页 ")])],1),n("b-navbar-nav",{directives:[{name:"show",rawName:"v-show",value:"login"!==this.$route.name,expression:"this.$route.name !== 'login'"}],staticClass:"ml-auto"},[n("b-nav-item",{attrs:{to:{name:"login"}}},[n("i",{staticClass:"ri-login-box-fill"}),e._v(" 登陆 ")])],1)],1)],1)],1),n("b-container",{staticClass:"mt-3"},[n("router-view"),n("footer",{attrs:{id:"footer"}},[n("b-row",{staticClass:"text-center"},[n("b-col",{attrs:{col:"",lg:"12"}},[n("p",[e._v("\n\t\t\t\t\t\tMade by\n\t\t\t\t\t\t"),n("a",{attrs:{href:"https://imwnk.cn"}},[e._v("IMWNK")]),e._v(".\n\t\t\t\t\t")])])],1)],1)],1)],1)},F=[],J={name:"app-main",data:function(){return{}},created:function(){console.log(this.$route.name)}},K=J,H=Object(m["a"])(K,G,F,!1,null,null,null),W=H.exports;function Q(e){return function(){return n("1a5d")("./".concat(e,".vue"))}}var V=[{path:"/",component:W,children:[{path:"/",name:"home",meta:{title:"OLAINDEX",requiresAuth:!1},component:Q("home/Index")},{path:"/message",name:"message",meta:{title:"消息",requiresAuth:!1},component:Q("home/Message")},{path:"/login",name:"login",meta:{title:"登陆",requiresAuth:!1},component:Q("home/Login")}]},{path:"/admin",component:W,children:[]}];n("f576"),n("a481"),n("6b54"),n("7618");function Y(e){e=e||"OLAINDEX",window.document.title=e}var Z=n("323e"),ee=n.n(Z);n("a5d8");r["default"].use(d["a"]);var te=new d["a"]({mode:"history",base:"/",routes:V});te.beforeEach((function(e,t,n){ee.a.start(),k.defaults({app:{}});var a=k.get("app");a.app_name?X.commit("setAppConfig",a):X.dispatch("loadAppConfig");var r=I(),s="login";if(r&&e.name===s&&n({name:"dashboard"}),Y(e.meta.title),e.matched.some((function(e){return e.meta.requiresAuth}))){k.defaults({user:{}});var o=k.get("user");o.id&&(X.commit("setUserId",o.id),X.commit("setUserName",o.name),X.commit("setStatus",o.status)),r&&X.commit("setToken",r),r||e.name===s?(r||e.name,n()):n({name:s})}else n()})),te.afterEach((function(){ee.a.done()}));var ne=te;function ae(e){return e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""}function re(e){if(!e)return 0;var t=["Bytes","KB","MB","GB","TB","PB"],n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,Math.floor(n))).toFixed(2)+" "+t[n]}var se=n("5f5b"),oe=(n("f9e3"),n("2dd8"),n("d4ce"),n("a65d")),ie=n.n(oe);r["default"].use(se["a"]),r["default"].use(ie.a,{theme:"toasted-primary",position:"top-right",duration:3e3,fitToScreen:"true"}),Object.keys(a).forEach((function(e){r["default"].filter(e,a[e])})),r["default"].config.productionTip=!1,new r["default"]({router:ne,store:X,render:function(e){return e(p)}}).$mount("#app")},"5d3a":function(e,t,n){"use strict";var a=n("19b7"),r=n.n(a);r.a},f121:function(e,t,n){"use strict";e.exports={title:"OLAINDEX",dev:{baseUrl:"http://127.0.0.1:8001"},build:{baseUrl:"/"}}}},[[0,"runtime","chunk-libs"]]]);